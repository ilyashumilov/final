<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OPS</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'Style.css' %}">
    <style>
        .one {
            padding:10px;
            margin:5px;  
            margin-left:40px;
            border: thin solid black;
            border-radius: 1px;
            position: absolute;
            left:1000px;
            top: 70px;
        }
        
        .button{
            margin: 5px;
            outline: none;
            border: thin solid black;
            text-decoration: none;
            background: none;
            padding: 10px;
            position: absolute;
            left: 1210px;
            top: 70px;
            color: black;
            font-size:80%;
            font-family: sohne, "Helvetica Neue", Helvetica, Arial, sans-serif;
        }

        .button:hover {
            background: black;
            outline: none;
            color: white;
            cursor: pointer;
        }
        
        .variants {
            width: 167px;
            max-height: 55px;
            background-color: white;
            position: absolute;
            left: 1040px;
            top: 112px;
            z-index: 1;
            overflow-y: auto;
            overflow-x: auto;
        }
        li {
            list-style: none;
            padding: 3px;
            font-family: sohne, "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size:85%;
        }

        li:hover {
            cursor: pointer;
            background: gold;
        }
    </style>
</head>
<body>

<a href = "{% url 'OPS'  %}" class=h2>VIPA</a>

<div class='particular'>
    {% for i in c %}
    <a href = "{% url 'Particular' i %}" class=link2>{{ i }}</a>
    {% endfor %}
</div>  
    
<form method = 'POST'>
    {% csrf_token %}
    {{ form }}
    <button type="submit" class='button'>Filter</button>
    <div class ="variants" id ="variants"></div>
</form>
    
<div class="box" >

    <table class="table" align="center" >
        {% if len2 != 0 %}
        <tr>
            <td class=head> Number </td>
            <td class=head> Origin </td>
            <td class=head> Supplier </td>            
            <td class=head> Carrier </td>
            <td class=head> Cntr </td>
            <td class=head> BK </td>        
            <td class=head> ETD </td>
            <td class=head> ETA </td>
            <td class=head> Comment </td>
        </tr>
        {% endif %}
        {% for Shipment in Buffer %}        
        <tr>
            <td class=row3> {{ Shipment.number }} </td>
            <td class=row3> {{ Shipment.Origin }} </td>
            <td class=row3> {{ Shipment.proveedor }} </td>
            <td class=row3> {{ Shipment.carrier }} </td>
            <td class=row3> {{ Shipment.cntr }} </td>
            <td class=row3> {{ Shipment.bknumber }} </td>
            <td class=row3> {{ Shipment.ETD }} </td>
            <td class=row3> {{ Shipment.ETA }} </td>
            <td class=row3> {{ Shipment.comment }} </td>
          
        </tr>
        {% endfor %}
    
    </table>
    
    <table class="table" align="center" >
        {% if len1 != 0 %}
        <tr>
            <td class=head> Number </td>
            <td class=head> Carrier </td>
            <td class=head> BK </td>  
            <td class=head> Origin </td> 
            <td class=head> Destination </td> 
            <td class=head> Material </td>  
            <td class=head> Cntrs </td>  
            <td class=head> ETD </td>
            <td class=head> ETA </td>
            <td class=head> M USD</td>
            <td class=head> M EUR</td>
            <td class=head>SI</td>
            <td class=head>MGC</td>
            <td class=head>CSTMS</td>
        </tr>
        {% endif %}
        {% for Shipment in Shipments %}
        {% if Shipment.BK == False %}
        
            <td class=row2> {{ Shipment.number }} </td>
            <td class=row2> {{ Shipment.carrier }} </td>
            <td class=row2> {{ Shipment.bknumber }} </td>
            <td class=row2> {{ Shipment.po.Origin }} </td>
            <td class=row2> {{ Shipment.po.so.destination }} </td>
            <td class=row2> {{ Shipment.po.material }} </td>
            <td class=row2> {{ Shipment.po.cntr }} </td>
            <td class=row2> {{ Shipment.ETD }} </td>
            <td class=row2> {{ Shipment.ETA }} </td>
            
            
            {% if Shipment.margin <= 0 %}
            <td class=row5> {{ Shipment.margin }} </td>
            {% endif %}
    
            {% if Shipment.margin > 0 %}
            <td class=row4> {{ Shipment.margin }} </td>
            {% endif %}
            
            {% if Shipment.numero <= 0 %}
            <td class=row5> {{ Shipment.marginEUR }} </td>
            {% endif %}
    
            {% if Shipment.numero > 0 %}
            <td class=row4> {{ Shipment.marginEUR }} </td>
            {% endif %}
            
            {% if Shipment.SI == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.SI == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}

            {% if Shipment.Magic == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.Magic == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}
    
            {% if Shipment.Customs == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.Customs == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}
        </tr>
        {% endif %}
    
        {% if Shipment.BK == True %}
        <tr>
            <td class=row0> {{ Shipment.number }} </td>
            <td class=row0> {{ Shipment.carrier }} </td>
            <td class=row0> {{ Shipment.bknumber }} </td>
            <td class=row0> {{ Shipment.po.Origin }} </td>
            <td class=row0> {{ Shipment.po.so.destination }} </td>
            <td class=row0> {{ Shipment.po.material }} </td>
            <td class=row0> {{ Shipment.po.cntr }} </td>
            <td class=row0> {{ Shipment.ETD }} </td>
            <td class=row0> {{ Shipment.ETA }} </td>       
            
            {% if Shipment.margin <= 0 %}
            <td class=row5> {{ Shipment.margin }} </td>
            {% endif %}
    
            {% if Shipment.margin > 0 %}
            <td class=row4> {{ Shipment.margin }} </td>
            {% endif %}
            
            {% if Shipment.numero <= 0 %}
            <td class=row5> {{ Shipment.marginEUR }} </td>
            {% endif %}
    
            {% if Shipment.numero > 0 %}
            <td class=row4> {{ Shipment.marginEUR }} </td>
            {% endif %}
            
            {% if Shipment.SI == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.SI == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}

            {% if Shipment.Magic == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.Magic == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}
    
            {% if Shipment.Customs == True %}
            <td class=row4> {{ ' ' }} </td>
            {% endif %}
            
            {% if Shipment.Customs == False %}
            <td class=row5> {{ ' ' }} </td>
            {% endif %}
        </tr>
        {% endif %}
        {% endfor %}
    
    </table>
    <table class="table" align="center" >
        {% if len != 0 %}
        <tr>
            <td class=head>  </td>
            <td class=head> Material </td>
            <td class=head> Number </td>
            <td class=head> Supplier </td>
            <td class=head> Origin </td>        
            <td class=head> Cntr </td>
            <td class=head> Tons </td>
            <td class=head> Price </td>
            <td class=head> Comment </td>
        </tr>
        {% endif %}

        {% for purchaise in queryset %}
        <tr>
            <td class=row> Readiness </td>
            <td class=row> {{ purchaise.po.material }} </td>
            {% if purchaise.number == 'Allocate' %}
            <td class=row5> {{ purchaise.number }} </td>
            {% endif %}
            
            {% if purchaise.number != 'Allocate' %}
            <td class=row> {{ purchaise.number }} </td>
            {% endif %}
            <td class=row> {{ purchaise.Proveedor }} </td>
            <td class=row> {{ purchaise.Origin }} </td>        
            <td class=row> {{ purchaise.cntr }} </td>
            <td class=row> {{ purchaise.Tons }} </td>
            
            {% if purchaise.po.currency == 'USD' %}
            <td class=row> {{ purchaise.po.price }}{{'$'}} </td>
            {% endif %}
            {% if purchaise.po.currency == 'EUR' %}
            <td class=row> {{ purchaise.po.price }}{{'â‚¬'}} </td>
            {% endif %}            
            
            <td class=row> {{ purchaise.comment }} </td>
        </tr>
        {% endfor %}
    </table>
</div>
<div class='manage'>
    {% if request.user.username == 'admin' %}
    <div class="dropdown">
        <button class="dropbtn">Report</button>
        <div class="dropdown-content">
          <a href="{% url 'Report' %}">RDNS</a>
          <a href="{% url 'reportOrders' %}">PO-SO</a>
        </div>
    </div>
        <a href = "{% url 'SalesViews'%}" class="link">SalesViews</a>
        <a href = "{% url 'FreightSearch'%}" class="link">FreightSearch</a>    
    {% endif %}
    <a href = "{% url 'PurchaisesCreate' %}" class="link" >Create PO</a>
    <a href = "{% url 'Search'%}" class="link">Search</a>
    <a href = "{% url 'MonthlyView'%}" class="link">Monthly</a>
</div>
</body>
<script type="text/javascript">
    const values = {{all|safe}};
</script>
<script src="{% static 'ScriptOPS.js' %}">
</script>
</html>